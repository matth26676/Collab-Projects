<!DOCTYPE html>
<html>

<head>
    <title>Hello!</title>
    <link rel="stylesheet" href="style.css">
</head>
<script src="/socket.io/socket.io.js"></script>


<body>
    <div id="mainpage">
        <div id="gamepage">
            <div id="buttonpage"></div>
        </div>
        Integrating Socket.io with Node.js and Express
    </div>
</body>
<script>

    var buttonList = []

    function buttonPress(currentButtonValue) {
        switch (currentButtonValue) {
            case 0:
                return 1
                break;

            case 1:
                return 0
                break;
        }

    }

    const socket = io();
    socket.on('recievedata', function (message) {
        if (message.buttonValue != null) {
            var gameButtonNumber = 'gamebutton' + message.buttonNumber
            var gameButton = document.getElementById(gameButtonNumber);
            buttonList[message.buttonNumber] = message.buttonValue
            switch (message.buttonValue) {
                case 0:
                    gameButton.style.backgroundColor = 'blue';
                    break;

                case 1:
                    gameButton.style.backgroundColor = 'red';
                    break;
            }
        }
    })

    for (let i = 0; i <= 63; i++) {

        let game = document.getElementById('buttonpage')
        let newButton = document.createElement('button');
        newButton.classList.add('gamebutton');
        newButton.id = "gamebutton" + i;
        
        newButton.addEventListener('click', () => { socket.emit('senddata', { buttonNumber: i, buttonValue: buttonPress(buttonList[i]) }) })
        document.getElementById('buttonpage').appendChild(newButton)

    }
</script>

</html>